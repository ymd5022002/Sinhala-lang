<!DOCTYPE html>
<meta http-equiv="content-type" charset="utf-8">
<head>
    <title>ෂින්හාරා යතුරු පුවරුව</title>
    <script>
        let text = "";  /*記述する文字列*/
        let i = 0;      /*文字化けなし文字の文字数*/
        let j = 1;      /*文字化け文字の文字数*/
        let bake = -1;  /*文字化け有無フラグ -1 が文字化けあり　*/
         let largeChara = ['ක','ඛ','ග','ඞ','ඟ','ච','ඡ','ජ','ඣ','ඤ','ඥ','ඦ',
        'ට','ඨ','ඩ','ඪ','ණ','ඬ','ත','ථ','ද','ධ','න','ඳ','ප','ඵ','බ','භ','ම','ඹ'] /*0-29*/
        let smallChara = ['ක','ඛ','ග','ඞ','ඟ','ච','ඡ','ජ','ඣ','ඤ','ඥ','ඦ',
        'ට','ඨ','ඩ','ඪ','ණ','ඬ','ත','ථ','ද','ධ','න','ඳ','ප','ඵ','බ','භ','ම','ඹ'] /*0-29*/
        document.onkeydown = keydown;
        function keydown() {
            target = document.getElementById("text");
            target2 = document.getElementById("title");
            switch (event.keyCode){
                case 27:    /*Escキー：初期化処理*/
                    text = "";
                    i = 0;
                    j = 1;
                    target.innerHTML = text + "_";
                    break;                
                case 8:    /*BackSpaceキー：後退削除処理*/
                    if (text.substring(text.length-4,text.length) == "<br>"){
                        text = text.substring(0,text.length-4);
                    }else{
                        text = text.substring(0,text.length-1);
                        if (bake == 1)　i = i - 2;
                        if (bake == -1)  j = j - 1;
                    }
                    target.innerHTML = text + "_";
                    break;
                case 13:    /*Enterキー：改行処理*/    
                    text =  text + "<br>"
                    target.innerHTML = text + "_";
                    break;
                
                case 32:    /*スペースキー：文字化け有無切り替え*/
                    text =  text + " "
                    target.innerHTML = text + "_";
                    break;
                default:
                    if (bake == 1){ /*文字化けがないとき*/
                        i = i + 1;
                        if((i % 2) == 0){　/*偶数キー押し時に処理*/
                            text =  text + book.substring(i/2-1, i/2);
                        }
                    }else{          /*文字化けがあるとき*/
                        if ((j % 2) == 1){    /*奇数文字目はlargeCharaからランダムに選ぶ*/
                        var n = Math.floor(Math.random() * 30); /*0-14の整数乱数*/
                        text =  text + largeChara[n];
                        }else{                /*偶数文字目はsmallCharaからランダムに選ぶ*/
                            var n = Math.floor(Math.random() * 30);  /*0-6の整数乱数*/
                            text =  text + smallChara[n];                    
                        }
                        j = j + 1; 
                    }
                    target.innerHTML = text + "_";
            }
            };
            /*document.getElementById('text').innerHTML = "_"*/
    </script>
</head>
<body>
    <!--
    <p>ෂින්හාරා යතුරු පුවරුව</p>
    <hr>
    -->
    <section id="content1"></section>
    <p><span id="text">_</span></p>
</body>
